<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>好和弦 Demo - 新聞與文章</title>
  <style>
    :root {
      --bg: #f9f9fb;
      --sidebar-bg: #fff;
      --sidebar-border: #e5e5e5;
      --main-bg: #f9f9fb;
      --card-bg: #fff;
      --card-shadow: 0 4px 24px rgba(0,0,0,0.08);
      --card-radius: 18px;
      --primary: #0071e3;
      --accent: #ff8c00;
      --text: #1d1d1f;
      --secondary: #6e6e73;
      --border: #d2d2d7;
      --danger: #ff3b30;
    }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: "Noto Sans TC", "PingFang TC", "Segoe UI", "Helvetica Neue", Helvetica, Arial, sans-serif;
      min-height: 100vh;
    }
    .container {
      display: flex;
      min-height: 100vh;
    }
    aside.sidebar {
      width: 260px;
      background: var(--sidebar-bg);
      border-right: 1px solid var(--sidebar-border);
      padding: 32px 24px 24px 24px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }
    .site-title {
      font-size: 1.7rem;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 12px;
      letter-spacing: 1px;
    }
    .site-desc {
      color: var(--secondary);
      font-size: 1.1rem;
      margin-bottom: 32px;
    }
    nav.menu {
      width: 100%;
      margin-bottom: 32px;
    }
    nav.menu ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    nav.menu li {
      margin-bottom: 10px;
    }
    nav.menu a {
      color: var(--text);
      text-decoration: none;
      font-weight: 500;
      font-size: 1.08rem;
      padding: 8px 0;
      display: block;
      border-radius: 8px;
      transition: background 0.2s, color 0.2s;
    }
    nav.menu a:hover {
      background: var(--primary);
      color: #fff;
    }
    main.main {
      flex: 1;
      background: var(--main-bg);
      padding: 40px 0 0 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    .main-header {
      padding: 0 40px 24px 40px;
      border-bottom: 1px solid var(--border);
      margin-bottom: 32px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .main-header h1 {
      font-size: 2rem;
      font-weight: 700;
      margin: 0;
    }
    .main-header .controls {
      display: flex;
      gap: 12px;
    }
    .control-btn {
      background: #f5f5f7;
      color: var(--primary);
      border: 1px solid var(--border);
      border-radius: 10px;
      font-weight: 600;
      font-size: 1rem;
      padding: 8px 18px;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .control-btn.active, .control-btn:focus {
      background: var(--primary);
      color: #fff;
    }
    .dropdown {
      position: relative;
      display: inline-block;
    }
    .dropdown-list {
      display: none;
      position: absolute;
      left: 0;
      top: 110%;
      min-width: 160px;
      background: #fff;
      border: 1px solid var(--border);
      border-radius: 10px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
      z-index: 10;
      margin-top: 4px;
      padding: 6px 0;
    }
    .dropdown-list.active {
      display: block;
    }
    .dropdown-item {
      padding: 10px 18px;
      cursor: pointer;
      color: var(--text);
      font-size: 1rem;
      border: none;
      background: none;
      width: 100%;
      text-align: left;
      transition: background 0.2s, color 0.2s;
    }
    .dropdown-item:hover, .dropdown-item.active {
      background: var(--primary);
      color: #fff;
    }
    .section-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin: 0 0 18px 0;
      padding-left: 40px;
      color: var(--primary);
      letter-spacing: 1px;
    }
    .card-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 32px;
      padding: 0 40px 40px 40px;
      margin-bottom: 40px;
    }
    .card {
      background: var(--card-bg);
      border-radius: var(--card-radius);
      box-shadow: var(--card-shadow);
      padding: 28px 24px 20px 24px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      transition: box-shadow 0.2s, transform 0.2s;
      cursor: pointer;
    }
    .card:hover {
      box-shadow: 0 8px 32px rgba(0,0,0,0.13);
      transform: translateY(-4px) scale(1.01);
    }
    .card-title {
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 6px;
    }
    .card-meta {
      color: var(--secondary);
      font-size: 0.98rem;
      margin-bottom: 4px;
    }
    .card-tags {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .tag {
      background: var(--primary);
      color: #fff;
      border-radius: 6px;
      font-size: 0.85rem;
      padding: 3px 10px;
      font-weight: 600;
    }
    .global-error {
      display: none;
      background: var(--danger);
      color: #fff;
      padding: 12px 20px;
      border-radius: 12px;
      margin: 20px auto;
      max-width: 400px;
      text-align: center;
      font-weight: bold;
      z-index: 9999;
      position: fixed;
      left: 50%;
      top: 20px;
      transform: translateX(-50%);
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }
    @media (max-width: 900px) {
      aside.sidebar { display: none; }
      .container { flex-direction: column; }
      main.main { padding: 0; }
      .main-header { padding: 24px 16px; }
      .card-list { padding: 16px; }
      .section-title { padding-left: 16px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <aside class="sidebar left-sidebar sticky">
      <div class="site-title">好和弦 Demo</div>
      <div class="site-desc">你的線上樂理、作曲、編曲、和電腦音樂教室！</div>
      <nav class="menu">
        <ul>
          <li><a href="#">首頁</a></li>
          <li><a href="#">新聞</a></li>
          <li><a href="#">文章</a></li>
          <li><a href="#">關於本站</a></li>
        </ul>
      </nav>
      <div style="margin-top:auto; color:var(--secondary); font-size:0.95rem;">© 2025 好和弦 Demo</div>
    </aside>
    <main class="main">
      <div class="main-header">
        <h1>好和弦 Demo</h1>
        <div class="controls">
          <div class="dropdown" id="sort-dropdown">
            <button class="control-btn" id="sort-btn">排序 ▼</button>
            <div class="dropdown-list" id="sort-list">
              <button class="dropdown-item active" data-sort="newest">最新</button>
              <button class="dropdown-item" data-sort="oldest">最舊</button>
            </div>
          </div>
          <div class="dropdown" id="cat-dropdown">
            <button class="control-btn" id="cat-btn">分類 ▼</button>
            <div class="dropdown-list" id="cat-list">
              <button class="dropdown-item active" data-cat="all">全部</button>
              <button class="dropdown-item" data-cat="和聲">和聲</button>
              <button class="dropdown-item" data-cat="鋼琴">鋼琴</button>
              <button class="dropdown-item" data-cat="作曲">作曲</button>
              <button class="dropdown-item" data-cat="新聞">新聞</button>
            </div>
          </div>
        </div>
      </div>
      <div class="global-error" id="global-error"></div>

      <div class="section-title">最新新聞</div>
      <div class="card-list" id="news-list"></div>

      <div class="section-title">精選文章</div>
      <div class="card-list" id="article-list"></div>
    </main>
  </div>
  <script>
    // 假資料
    const news = [
      { title: "好和弦網站全新改版上線！", date: "2025-08-04", category: "新聞", tags: ["公告"], desc: "全新設計、全新體驗，歡迎大家多多使用！" },
      { title: "2025 年 8 月音樂比賽開放報名", date: "2025-08-01", category: "新聞", tags: ["比賽", "活動"], desc: "歡迎所有音樂愛好者參加，詳情請見活動頁。" }
    ];
    const articles = [
      { title: "讓副屬和弦更漂亮的小技巧！", date: "2025-08-03", category: "和聲", tags: ["和聲", "進階"], desc: "在副屬和弦前面加入二級和弦，厲害度瞬間上升！" },
      { title: "莫札特真的是「神童」嗎？", date: "2025-07-31", category: "作曲", tags: ["作曲", "歷史"], desc: "莫札特五歲的時候就會的作曲技巧，你已經學會了嗎？" },
      { title: "1-6-2-5 和弦進行！", date: "2025-07-07", category: "和聲", tags: ["和聲", "流行"], desc: "來聊聊無所不在的 1-6-2-5 和弦進行！" },
      { title: "如何練音階？", date: "2025-06-11", category: "鋼琴", tags: ["鋼琴", "技巧"], desc: "你練音階的方式，就只是照著「哈農」的譜，然後從低音爬到高音再爬回來嗎？" }
    ];
    let currentSort = "newest";
    let currentCat = "all";

    function renderCards(list, data) {
      let filtered = data.filter(a => currentCat === "all" || a.category === currentCat);
      filtered.sort((a, b) => {
        if (currentSort === "newest") return new Date(b.date) - new Date(a.date);
        else return new Date(a.date) - new Date(b.date);
      });
      const cardList = document.getElementById(list);
      cardList.innerHTML = '';
      if (filtered.length === 0) {
        cardList.innerHTML = '<div style="color:var(--secondary);font-size:1.1rem;">沒有找到相關內容。</div>';
        return;
      }
      for (const a of filtered) {
        cardList.innerHTML += `
          <div class="card">
            <div class="card-title">${a.title}</div>
            <div class="card-meta">${a.date}　|　${a.category}</div>
            <div class="card-tags">${a.tags.map(t => `<span class="tag">${t}</span>`).join(' ')}</div>
            <div style="color:var(--secondary);font-size:1rem;">${a.desc}</div>
          </div>
        `;
      }
    }

    // 下拉選單互動
    function setupDropdowns() {
      // 排序
      const sortBtn = document.getElementById('sort-btn');
      const sortList = document.getElementById('sort-list');
      sortBtn.addEventListener('click', e => {
        e.stopPropagation();
        sortList.classList.toggle('active');
        document.getElementById('cat-list').classList.remove('active');
      });
      sortList.addEventListener('click', e => {
        e.stopPropagation();
        if (e.target.classList.contains('dropdown-item')) {
          document.querySelectorAll('#sort-list .dropdown-item').forEach(i => i.classList.remove('active'));
          e.target.classList.add('active');
          currentSort = e.target.dataset.sort;
          renderAll();
          sortList.classList.remove('active');
        }
      });
      // 分類
      const catBtn = document.getElementById('cat-btn');
      const catList = document.getElementById('cat-list');
      catBtn.addEventListener('click', e => {
        e.stopPropagation();
        catList.classList.toggle('active');
        document.getElementById('sort-list').classList.remove('active');
      });
      catList.addEventListener('click', e => {
        e.stopPropagation();
        if (e.target.classList.contains('dropdown-item')) {
          document.querySelectorAll('#cat-list .dropdown-item').forEach(i => i.classList.remove('active'));
          e.target.classList.add('active');
          currentCat = e.target.dataset.cat;
          renderAll();
          catList.classList.remove('active');
        }
      });
      // 點擊外部關閉
      document.addEventListener('click', e => {
        if (!e.target.closest('.dropdown')) {
          sortList.classList.remove('active');
          catList.classList.remove('active');
        }
      });
    }

    function renderAll() {
      renderCards('news-list', news);
      renderCards('article-list', articles);
    }

    // 錯誤訊息顯示
    function showError(msg) {
      const el = document.getElementById('global-error');
      el.textContent = msg;
      el.style.display = 'block';
      setTimeout(() => { el.style.display = 'none'; }, 4000);
    }

    // 初始化
    document.addEventListener('DOMContentLoaded', () => {
      renderAll();
      setupDropdowns();
      // 範例：showError('這是錯誤訊息');
    });
  </script>
</body>
</html>

